<h1>All Books</h1>

<%= link_to "New Book", new_book_path %>
<%= link_to "Report", report_books_path %>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Year</th>
      <th>Base Price</th>
      <th>Authors</th>
      <th>Format</th>
    </tr>
  <thead>
  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td>
          <%= link_to(book) { book.title } %>
        </td>
        <td>
          <%= Date.strptime(book.release_date, '%m/%d/%Y').year %>
        </td>
        <td>
          <%= book.base_price %>
        </td>
        <td>
          <% book.authors.each_with_index do |author, i| %>
            <%= author.full_name + (i < book.authors.size - 1 ? ',' : '') %>
          <% end %>
        </td>
        <td>
          <%= book.format.name %>
        </td>
      </tr>
    <% end %>
